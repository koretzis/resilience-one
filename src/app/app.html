<div class="dashboard-container">
  
  <div *ngIf="activeAlert" 
       class="alert-banner"
       [class.banner-critical]="activeAlert.type === 'CRITICAL'"
       [class.banner-warning]="activeAlert.type === 'WARNING'">
    <div class="alert-icon">{{ activeAlert.type === 'CRITICAL' ? 'ğŸš¨' : 'âš ï¸' }}</div>
    <div class="alert-content">
      <strong>{{ activeAlert.type }} DETECTED</strong>
      <p>{{ activeAlert.msg }}</p>
    </div>
  </div>

  <div class="header-row">
    <h1>âš¡ Resilience Engine: "Elpida" Scenario Replay</h1>
    <span class="timestamp">ğŸ•’ Time: {{ lastTimestamp }}</span>
  </div>
  
  <div class="status-panel">
    <div class="card">
      <h3>ğŸ›ï¸ Syntagma</h3>
      <p>Ambient Temp</p>
      <h2>{{ getValue('sub-syntagma') | number:'1.1-1' }}Â°C</h2>
      <small>Real-time Weather</small>
    </div>

    <div class="card" [class.warning]="getValue('sub-omonia') > 90">
      <h3>ğŸ™ï¸ Omonia</h3>
      <p>Grid Load</p>
      <h2>{{ getValue('sub-omonia') | number:'1.0-0' }}%</h2>
      <small *ngIf="getValue('sub-omonia') > 90">âš¡ HIGH DEMAND</small>
    </div>

    <div class="card ml-card" [style.border-color]="predictionRisk > 50 ? '#ff9800' : '#4caf50'">
       <h3>ğŸ§  AI Predictor</h3>
       <p>Failure Probability</p>
       <h2 [style.color]="predictionRisk > 50 ? '#ff9800' : '#4caf50'">
         {{ predictionRisk }}%
       </h2>
       <small>{{ predictionMsg }}</small>
    </div>

    <div class="card" [class.critical]="getValue('gen-evangelismos') < 20">
      <h3>ğŸ¥ Generator</h3>
      <p>Fuel Level</p>
      <h2>{{ getValue('gen-evangelismos') | number:'1.0-0' }}%</h2>
      <small *ngIf="getValue('gen-evangelismos') < 20">â›½ EMPTY</small>
    </div>
  </div>

  <div class="map-wrapper">
    <h3>ğŸ“ Geospatial Live View (Athens Topology)</h3>
    <app-geo-map></app-geo-map>
  </div>
</div>